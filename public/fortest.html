<!DOCTYPE html>
<html>
  <head>
    <title>Comment Form</title>
  </head>
  <body>
    <table border="1px">
      <thead>
        <tr>
          <th>name</th>
          <th>comment</th>
          <th>link</th>
        </tr>
      </thead>
      <tbody id="dataRow"></tbody>
    </table>
    <br />
    <form id="CommentForm">
      Name:<br />
      <input type="text" id="idName" placeholder="Enter Name" /> <br />
      Comment:<br />
      <textarea
        rows="10"
        cols="20"
        id="idComment"
        placeholder="Enter Comment"
      ></textarea
      ><br />
      Link:<br />
      <input type="text" id="idLink" placeholder="Enter Link" /> <br /><br />
      <input type="submit" id="commentBtn" />
    </form>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-analytics.js"></script>

    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyAZOycSdefX8hyY8BWTCKwchL5PLUJiUyU",
        authDomain: "atoz-9d4f8.firebaseapp.com",
        databaseURL: "https://atoz-9d4f8.firebaseio.com",
        projectId: "atoz-9d4f8",
        storageBucket: "atoz-9d4f8.appspot.com",
        messagingSenderId: "180619054346",
        appId: "1:180619054346:web:601fac9b0683664b123ef3",
        measurementId: "G-LMJXVJL4F3"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();

      let myFirebase = firebase.database();
      let dataRef = myFirebase.ref("/fortest");
      document.getElementById("commentBtn").onclick = function() {
        let lname = document.getElementById("idName").value;
        let lcomment = document.getElementById("idComment").value;
        let llink = document.getElementById("idLink").value;
        let ltime = Date.now();
        dataRef.push({
          name: lname,
          comment: lcomment,
          link: llink,
          time: ltime
        });
      };
      dataRef.limitToLast(5).on("child_added", function(childSnapshot) {
        let item = childSnapshot.val();
        document.getElementById("dataRow").innerHTML +=
          "<tr><td>" +
          item.name +
          "</td><td>" +
          item.comment +
          "</td><td>" +
          item.link +
          "</td></tr>";
      });
    </script>
  </body>
</html>
